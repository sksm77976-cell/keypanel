<!DOCTYPE html>
<html>
<head>
<title>CH Key Premium Panel</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body{
margin:0;
font-family:'Segoe UI',sans-serif;
background:#0f0f0f;
color:white;
overflow-x:hidden;
}
canvas{
position:fixed;
top:0;
left:0;
z-index:-1;
}
h1{
text-align:center;
margin-top:20px;
font-size:32px;
background:linear-gradient(90deg,#00ffcc,#ff00ff);
-webkit-background-clip:text;
color:transparent;
}
.panel{
width:90%;
max-width:1000px;
margin:auto;
margin-top:20px;
background:rgba(20,20,20,0.85);
padding:20px;
border-radius:15px;
box-shadow:0 0 30px #00ffcc55;
backdrop-filter:blur(10px);
}
.section{
margin-bottom:30px;
}
input,select{
padding:8px;
border:none;
border-radius:8px;
margin:5px;
}
button{
padding:7px 12px;
border:none;
border-radius:8px;
cursor:pointer;
font-weight:bold;
transition:0.3s;
}
.btn-create{
background:#00ffcc;
}
.btn-create:hover{
background:#00ccaa;
}
.keyCard{
background:#1a1a1a;
margin:15px 0;
padding:15px;
border-radius:12px;
border:2px solid transparent;
animation:borderColor 5s linear infinite;
}
@keyframes borderColor{
0%{border-color:#00ffcc;}
50%{border-color:#ff00ff;}
100%{border-color:#00ffcc;}
}
.keyTitle{
font-size:18px;
font-weight:bold;
margin-bottom:5px;
display:flex;
justify-content:space-between;
align-items:center;
}
.copyBtn{
cursor:pointer;
font-size:18px;
}
.copyBtn:hover{
transform:scale(1.2);
}
.actions button{
margin:3px;
}
</style>
</head>
<body>

<canvas id="particles"></canvas>

<h1>‚ú® CH Premium Key Panel ‚ú®</h1>

<div class="panel">

<div class="section">
<h3>‚ûï Crear Nueva Key</h3>
<input id="timeValue" placeholder="Cantidad">
<select id="timeType">
<option value="minutes">Minutos</option>
<option value="hours">Horas</option>
<option value="days">D√≠as</option>
</select>
<button class="btn-create" onclick="createKey()">Crear</button>
</div>

<div class="section">
<h3>üìú Keys Generadas</h3>
<div id="keys"></div>
</div>

</div>

<script>

const API="https://keysystem-b6950-default-rtdb.firebaseio.com/keys";

function generateKey(){
let chars="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
let result="CH";
for(let i=0;i<4;i++){
result+=chars.charAt(Math.floor(Math.random()*chars.length));
}
return result;
}

function convertToMs(value,type){
if(type==="minutes") return value*60*1000;
if(type==="hours") return value*60*60*1000;
if(type==="days") return value*24*60*60*1000;
}

function formatTime(ms){
let s=Math.floor(ms/1000);
if(s<=0) return "‚õî Expirada";
let d=Math.floor(s/86400);
let h=Math.floor((s%86400)/3600);
let m=Math.floor((s%3600)/60);
let sec=s%60;
return `${d}d ${h}h ${m}m ${sec}s`;
}

function createKey(){
let value=parseInt(document.getElementById("timeValue").value);
let type=document.getElementById("timeType").value;
if(!value) return alert("Tiempo inv√°lido");

let key=generateKey();
let expire=Date.now()+convertToMs(value,type);

fetch(API+"/"+key+".json",{
method:"PUT",
body:JSON.stringify({
expire:expire,
banned:false,
created:Date.now()
})
}).then(loadKeys);
}

function loadKeys(){
fetch(API+".json")
.then(r=>r.json())
.then(data=>{
let container=document.getElementById("keys");
container.innerHTML="";
if(!data){
container.innerHTML="<p>No hay keys creadas.</p>";
return;
}

Object.keys(data).forEach(k=>{
let remaining=data[k].expire-Date.now();

let div=document.createElement("div");
div.className="keyCard";

div.innerHTML=`
<div class="keyTitle">
<span>${k}</span>
<span class="copyBtn" onclick="copyKey('${k}')">üìã</span>
</div>

Creada: ${new Date(data[k].created).toLocaleString()}<br>
Tiempo restante: ${formatTime(remaining)}<br>
Estado: ${data[k].banned ? "üîí BANEADA" : "‚úÖ ACTIVA"}<br><br>

<input id="add_${k}" placeholder="Tiempo">
<select id="type_${k}">
<option value="minutes">Min</option>
<option value="hours">Horas</option>
<option value="days">D√≠as</option>
</select>

<div class="actions">
<button onclick="addTime('${k}')">‚ûï</button>
<button onclick="removeTime('${k}')">‚ûñ</button>
<button onclick="toggleBan('${k}', ${data[k].banned})">üîí</button>
<button onclick="deleteKey('${k}')">üóëÔ∏è</button>
</div>
`;

container.appendChild(div);
});
});
}

function copyKey(key){
navigator.clipboard.writeText(key);
alert("Key copiada: "+key);
}

function addTime(key){
let value=parseInt(document.getElementById("add_"+key).value);
let type=document.getElementById("type_"+key).value;
if(!value) return;

fetch(API+"/"+key+".json")
.then(r=>r.json())
.then(data=>{
data.expire+=convertToMs(value,type);
fetch(API+"/"+key+".json",{method:"PUT",body:JSON.stringify(data)})
.then(loadKeys);
});
}

function removeTime(key){
let value=parseInt(document.getElementById("add_"+key).value);
let type=document.getElementById("type_"+key).value;
if(!value) return;

fetch(API+"/"+key+".json")
.then(r=>r.json())
.then(data=>{
data.expire-=convertToMs(value,type);
fetch(API+"/"+key+".json",{method:"PUT",body:JSON.stringify(data)})
.then(loadKeys);
});
}

function toggleBan(key,current){
fetch(API+"/"+key+"/banned.json",{
method:"PUT",
body:JSON.stringify(!current)
}).then(loadKeys);
}

function deleteKey(key){
fetch(API+"/"+key+".json",{method:"DELETE"})
.then(loadKeys);
}

setInterval(loadKeys,3000);
loadKeys();

/* PARTICULAS */
const canvas=document.getElementById("particles");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

let particles=[];
for(let i=0;i<100;i++){
particles.push({
x:Math.random()*canvas.width,
y:Math.random()*canvas.height,
r:Math.random()*2,
dx:(Math.random()-0.5),
dy:(Math.random()-0.5)
});
}

function animate(){
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.fillStyle="#00ffcc";
particles.forEach(p=>{
ctx.beginPath();
ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
ctx.fill();
p.x+=p.dx;
p.y+=p.dy;
if(p.x<0||p.x>canvas.width) p.dx*=-1;
if(p.y<0||p.y>canvas.height) p.dy*=-1;
});
requestAnimationFrame(animate);
}
animate();

</script>

</body>
</html>
